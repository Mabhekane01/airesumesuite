# ========================================
# PDF Service - Production Configuration
# ========================================

# Server Configuration
server.port=${SERVER_PORT:8080}
server.servlet.context-path=${SERVER_CONTEXT_PATH:/}
spring.application.name=${APP_NAME:pdf-service}

# Environment (profile is activated externally, not here)

# ========================================
# FILE UPLOAD SETTINGS
# ========================================
spring.servlet.multipart.enabled=true
spring.servlet.multipart.max-file-size=${MAX_FILE_SIZE:50MB}
spring.servlet.multipart.max-request-size=${MAX_REQUEST_SIZE:100MB}
spring.servlet.multipart.file-size-threshold=10MB
spring.servlet.multipart.location=${java.io.tmpdir}

# ========================================
# SECURITY SETTINGS
# ========================================
# CORS Configuration - handled by CorsConfig class
cors.allowed.origins=${CORS_ALLOWED_ORIGINS:*}
cors.allowed.methods=${CORS_ALLOWED_METHODS:GET,POST,PUT,DELETE,OPTIONS}

# Security Headers
server.servlet.session.cookie.secure=true
server.servlet.session.cookie.http-only=true
server.servlet.session.cookie.same-site=strict

# ========================================
# PERFORMANCE & LIMITS
# ========================================
# Tomcat Configuration (using correct property names)
server.tomcat.threads.max=${TOMCAT_MAX_THREADS:200}
server.tomcat.threads.min-spare=${TOMCAT_MIN_THREADS:10}
server.tomcat.max-connections=${TOMCAT_MAX_CONNECTIONS:8192}
server.tomcat.accept-count=${TOMCAT_ACCEPT_COUNT:100}
server.tomcat.max-swallow-size=${TOMCAT_MAX_SWALLOW_SIZE:100MB}
server.tomcat.max-http-form-post-size=${TOMCAT_MAX_HTTP_POST_SIZE:100MB}
server.tomcat.connection-timeout=${TOMCAT_CONNECTION_TIMEOUT:20s}

# JVM Performance Settings
server.compression.enabled=true
server.compression.mime-types=text/html,text/xml,text/plain,text/css,application/json,application/xml
server.compression.min-response-size=1024

# ========================================
# LOGGING CONFIGURATION
# ========================================
logging.level.root=${LOG_LEVEL_ROOT:INFO}
logging.level.com.airesumesuite.pdfservice=${LOG_LEVEL_APP:INFO}
logging.level.org.sejda.sambox=${LOG_LEVEL_SAMBOX:WARN}
logging.level.org.apache.pdfbox=${LOG_LEVEL_PDFBOX:WARN}
logging.level.org.springframework.web=${LOG_LEVEL_SPRING_WEB:WARN}

# Production logging pattern with structured format
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level [%logger{36}] - %msg%n
logging.pattern.file=%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level [%logger{36}] - %msg%n

# Log file configuration
logging.file.name=${LOG_FILE_PATH:./logs/pdf-service.log}
logging.logback.rollingpolicy.max-file-size=${LOG_FILE_MAX_SIZE:100MB}
logging.logback.rollingpolicy.max-history=${LOG_FILE_MAX_HISTORY:30}
logging.logback.rollingpolicy.total-size-cap=${LOG_FILE_TOTAL_SIZE:1GB}

# ========================================
# MEMORY & RESOURCE MANAGEMENT
# ========================================
# PDF Processing Memory Limits
pdf.processing.memory.max=${PDF_MEMORY_MAX:512MB}
pdf.processing.temp.dir=${PDF_TEMP_DIR:./temp/pdf}
pdf.processing.max.pages=${PDF_MAX_PAGES:1000}
pdf.processing.timeout.seconds=${PDF_PROCESSING_TIMEOUT:300}

# Cleanup settings
pdf.temp.cleanup.interval=${PDF_TEMP_CLEANUP_INTERVAL:3600000}
pdf.temp.cleanup.age=${PDF_TEMP_CLEANUP_AGE:1800000}

# ========================================
# MONITORING & HEALTH
# ========================================
# Actuator endpoint configuration (Spring Boot 3.x format)
management.endpoints.web.exposure.include=${ACTUATOR_ENDPOINTS:health,info}
management.endpoints.web.base-path=/actuator

# Health check settings
management.health.defaults.enabled=false
management.health.ping.enabled=true
management.health.diskspace.enabled=true
management.health.diskspace.threshold=${HEALTH_DISK_THRESHOLD:100MB}

# ========================================
# ERROR HANDLING
# ========================================
server.error.whitelabel.enabled=false
server.error.include-stacktrace=never
server.error.include-message=always
server.error.include-binding-errors=never

# ========================================
# FEATURE FLAGS
# ========================================
pdf.features.ocr.enabled=${OCR_ENABLED:false}
pdf.features.digital-signature.enabled=${DIGITAL_SIGNATURE_ENABLED:true}
pdf.features.watermark.enabled=${WATERMARK_ENABLED:true}
pdf.features.security.enabled=${SECURITY_ENABLED:true}
pdf.features.optimization.enabled=${OPTIMIZATION_ENABLED:true}

# ========================================
# EXTERNAL SERVICES
# ========================================
# If using external OCR service
ocr.service.url=${OCR_SERVICE_URL:}
ocr.service.api-key=${OCR_SERVICE_API_KEY:}
ocr.service.timeout=${OCR_SERVICE_TIMEOUT:30000}

# Rate limiting (if implemented)
rate.limit.enabled=${RATE_LIMIT_ENABLED:true}
rate.limit.requests.per.minute=${RATE_LIMIT_RPM:60}
rate.limit.requests.per.hour=${RATE_LIMIT_RPH:1000}