# =============================================================================
# Document Sharing Service - Environment Configuration
# =============================================================================

# =============================================================================
# Server Configuration
# =============================================================================
NODE_ENV=development
PORT=3000
HOST=0.0.0.0
BASE_URL=http://localhost:3000
API_VERSION=v1

# =============================================================================
# Database Configuration
# =============================================================================
# PostgreSQL connection string
DATABASE_URL=postgresql://username:password@localhost:5432/document_sharing

# Alternative individual database settings
DB_HOST=localhost
DB_PORT=5432
DB_NAME=document_sharing
DB_USER=postgres
DB_PASSWORD=your_password
DB_MAX_CONNECTIONS=20
DB_SSL=false

# =============================================================================
# Redis Configuration
# =============================================================================
# Redis connection string
REDIS_URL=redis://localhost:6379

# Alternative individual Redis settings
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0
REDIS_MAX_CLIENTS=50

# =============================================================================
# JWT Configuration
# =============================================================================
JWT_SECRET=your-super-secret-jwt-key-change-in-production
JWT_REFRESH_SECRET=your-super-secret-refresh-key-change-in-production
JWT_EXPIRES_IN=15m
JWT_REFRESH_EXPIRES_IN=7d

# =============================================================================
# File Storage Configuration
# =============================================================================
# Local storage path
UPLOAD_PATH=./uploads
TEMP_PATH=./temp

# File size limits (in bytes)
MAX_FILE_SIZE=104857600
MAX_IMAGE_SIZE=10485760
MAX_DOCUMENT_SIZE=52428800

# Allowed file types
ALLOWED_IMAGE_TYPES=jpg,jpeg,png,gif,bmp,webp
ALLOWED_DOCUMENT_TYPES=pdf,doc,docx,ppt,pptx,xls,xlsx
ALLOWED_ALL_TYPES=jpg,jpeg,png,gif,bmp,webp,pdf,doc,docx,ppt,pptx,xls,xlsx

# =============================================================================
# CORS Configuration
# =============================================================================
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:3001,http://localhost:5173
CORS_CREDENTIALS=true
CORS_METHODS=GET,POST,PUT,DELETE,PATCH,OPTIONS
CORS_ALLOWED_HEADERS=Content-Type,Authorization,X-Requested-With

# =============================================================================
# Rate Limiting
# =============================================================================
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100
RATE_LIMIT_SKIP_SUCCESSFUL_REQUESTS=false

# Subscription-based rate limits
FREE_TIER_LIMIT=100
PRO_TIER_LIMIT=500
ENTERPRISE_TIER_LIMIT=2000

# =============================================================================
# Security Configuration
# =============================================================================
# Password hashing
SALT_ROUNDS=12
MIN_PASSWORD_LENGTH=8

# Session management
SESSION_SECRET=your-session-secret-change-in-production
SESSION_MAX_AGE=86400000

# Security headers
HELMET_CONTENT_SECURITY_POLICY=true
HELMET_HIDE_POWERED_BY=true

# =============================================================================
# Email Configuration (for notifications)
# =============================================================================
# SMTP settings
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=your-email@gmail.com
SMTP_PASS=your-app-password

# Email templates
EMAIL_FROM=noreply@yourdomain.com
EMAIL_FROM_NAME=Document Sharing Service

# =============================================================================
# Analytics Configuration
# =============================================================================
# Analytics retention (in days)
ANALYTICS_RETENTION_DAYS=90
ANALYTICS_BATCH_SIZE=1000

# Geolocation
GEOIP_ENABLED=true
GEOIP_DATABASE_PATH=./data/GeoLite2-City.mmdb

# User agent parsing
UA_PARSER_ENABLED=true

# =============================================================================
# File Processing Configuration
# =============================================================================
# Document conversion
LIBREOFFICE_PATH=/usr/bin/soffice
PDFTOTEXT_PATH=/usr/bin/pdftotext
PDFINFO_PATH=/usr/bin/pdfinfo

# Image processing
THUMBNAIL_WIDTH=300
THUMBNAIL_HEIGHT=400
PREVIEW_QUALITY=80

# OCR configuration
OCR_ENABLED=true
TESSERACT_LANG=eng

# =============================================================================
# Monitoring and Logging
# =============================================================================
# Logging level
LOG_LEVEL=info
LOG_FORMAT=json
LOG_FILE_PATH=./logs

# Health check intervals (in milliseconds)
HEALTH_CHECK_INTERVAL=30000
HEALTH_CHECK_TIMEOUT=5000

# Metrics collection
METRICS_ENABLED=true
METRICS_PORT=9090

# =============================================================================
# Webhook Configuration
# =============================================================================
WEBHOOK_ENABLED=true
WEBHOOK_MAX_RETRIES=3
WEBHOOK_RETRY_DELAY=5000
WEBHOOK_TIMEOUT=10000

# =============================================================================
# Cache Configuration
# =============================================================================
# Redis cache settings
CACHE_TTL=3600
CACHE_MAX_KEYS=10000
CACHE_CLEANUP_INTERVAL=300000

# =============================================================================
# Development and Testing
# =============================================================================
# Development mode
DEV_MODE=true
DEBUG_ENABLED=true
MOCK_SERVICES=false

# Testing
TEST_DATABASE_URL=postgresql://username:password@localhost:5432/document_sharing_test
TEST_REDIS_URL=redis://localhost:6379/1

# =============================================================================
# Production Overrides
# =============================================================================
# Uncomment and modify these for production deployment

# NODE_ENV=production
# BASE_URL=https://yourdomain.com
# ALLOWED_ORIGINS=https://yourdomain.com
# DATABASE_URL=postgresql://user:pass@host:5432/db
# REDIS_URL=redis://host:6379
# JWT_SECRET=very-long-random-secret-key-for-production
# JWT_REFRESH_SECRET=very-long-random-refresh-key-for-production
# UPLOAD_PATH=/var/uploads
# LOG_LEVEL=warn
# DEV_MODE=false
# DEBUG_ENABLED=false
# MOCK_SERVICES=false
